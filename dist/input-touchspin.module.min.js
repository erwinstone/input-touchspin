/*!
* @erwinstone/input-touchspin v1.0.0 (https://input-touchspin.vercel.app/)
* Copyright 2021 erwinstone
* Licensed under MIT (https://github.com/erwinstone/input-touchspin/blob/master/LICENSE)
*/class s{constructor(t){this.styleId="input-touchspin-style",this.input=t.querySelector("[data-touchspin-input]"),this.btnUp=t.querySelector("[data-touchspin-up]"),this.btnDown=t.querySelector("[data-touchspin-down]"),this.style(),!this.input.readOnly&&!this.input.disabled&&this.events()}style(){if(document.getElementById(this.styleId)===null){const t=document.createElement("style");t.id=this.styleId,t.textContent="[data-touchspin-input]::-webkit-inner-spin-button,[data-touchspin-input]::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}[data-touchspin-input]{-moz-appearance:textfield}",document.head.appendChild(t)}}events(){this.btnUp.addEventListener("mousedown",()=>this.spin()),this.btnDown.addEventListener("mousedown",()=>this.spin(!1)),this.btnUp.addEventListener("touchstart",t=>{this.spin(),t.cancelable&&t.preventDefault()}),this.btnDown.addEventListener("touchstart",t=>{this.spin(!1),t.cancelable&&t.preventDefault()}),Array.from(["mouseup","mouseleave","touchend"]).forEach(t=>{this.btnUp.addEventListener(t,()=>this.clearTimers()),this.btnDown.addEventListener(t,()=>this.clearTimers())}),this.input.addEventListener("wheel",t=>{Math.sign(t.deltaY)<1?this.step():this.step(!1),t.preventDefault()})}clearTimers(){clearTimeout(this.timeout),clearInterval(this.interval)}step(t=!0){const e=this.input.value;t?this.input.stepUp():this.input.stepDown();const n=this.input.value;e!==n&&this.input.dispatchEvent(new Event("change"))}spin(t=!0){this.step(t),this.timeout=setTimeout(()=>this.interval=setInterval(()=>this.step(t),50),300)}}export{s as default};
